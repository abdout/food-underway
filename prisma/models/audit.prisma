// Audit Log Model
model AuditLog {
  id           String      @id @default(cuid())
  merchant     Merchant    @relation(fields: [merchantId], references: [id], onDelete: Cascade)
  merchantId   String

  userId       String      // User who performed the action
  userRole     String
  userName     String

  action       AuditAction
  entityType   String      // Model name (Order, MenuItem, etc.)
  entityId     String      // ID of the affected entity

  oldData      Json?       // Previous state
  newData      Json?       // New state

  ipAddress    String?
  userAgent    String?

  createdAt    DateTime    @default(now())

  @@index([merchantId])
  @@index([userId])
  @@index([action])
  @@index([entityType])
  @@index([createdAt])
}

enum AuditAction {
  CREATE
  UPDATE
  DELETE
  VIEW
  EXPORT
  LOGIN
  LOGOUT
  PAYMENT
  REFUND
}
